<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 3 Data | NYC Crime</title>
  <meta name="description" content="Chapter 3 Data | NYC Crime" />
  <meta name="generator" content="bookdown 0.30 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 3 Data | NYC Crime" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 3 Data | NYC Crime" />
  
  
  

<meta name="author" content="Devan Samant" />


<meta name="date" content="2023-03-25" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="proposal.html"/>
<link rel="next" href="results.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>




<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">NYC Crime</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="proposal.html"><a href="proposal.html"><i class="fa fa-check"></i><b>2</b> Proposal</a>
<ul>
<li class="chapter" data-level="2.1" data-path="proposal.html"><a href="proposal.html#research-topic"><i class="fa fa-check"></i><b>2.1</b> Research topic</a></li>
<li class="chapter" data-level="2.2" data-path="proposal.html"><a href="proposal.html#data-availability"><i class="fa fa-check"></i><b>2.2</b> Data availability</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="proposal.html"><a href="proposal.html#content"><i class="fa fa-check"></i><b>2.2.1</b> <em>Content</em></a></li>
<li class="chapter" data-level="2.2.2" data-path="proposal.html"><a href="proposal.html#who-collects-the-data"><i class="fa fa-check"></i><b>2.2.2</b> <em>Who Collects The Data</em></a></li>
<li class="chapter" data-level="2.2.3" data-path="proposal.html"><a href="proposal.html#format-and-importation"><i class="fa fa-check"></i><b>2.2.3</b> <em>Format and Importation</em></a></li>
<li class="chapter" data-level="2.2.4" data-path="proposal.html"><a href="proposal.html#updates"><i class="fa fa-check"></i><b>2.2.4</b> <em>Updates</em></a></li>
<li class="chapter" data-level="2.2.5" data-path="proposal.html"><a href="proposal.html#expected-challenges"><i class="fa fa-check"></i><b>2.2.5</b> <em>Expected Challenges</em></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="data.html"><a href="data.html"><i class="fa fa-check"></i><b>3</b> Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="data.html"><a href="data.html#source"><i class="fa fa-check"></i><b>3.1</b> Source</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="data.html"><a href="data.html#content-1"><i class="fa fa-check"></i><b>3.1.1</b> Content</a></li>
<li class="chapter" data-level="3.1.2" data-path="data.html"><a href="data.html#who-collects-the-data-1"><i class="fa fa-check"></i><b>3.1.2</b> Who Collects The Data</a></li>
<li class="chapter" data-level="3.1.3" data-path="data.html"><a href="data.html#format-and-importation-1"><i class="fa fa-check"></i><b>3.1.3</b> Format and Importation</a></li>
<li class="chapter" data-level="3.1.4" data-path="data.html"><a href="data.html#data-updates"><i class="fa fa-check"></i><b>3.1.4</b> Data Updates</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="data.html"><a href="data.html#data-transformation-and-cleaning"><i class="fa fa-check"></i><b>3.2</b> Data Transformation and Cleaning</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="data.html"><a href="data.html#data-loading"><i class="fa fa-check"></i><b>3.2.1</b> Data Loading</a></li>
<li class="chapter" data-level="3.2.2" data-path="data.html"><a href="data.html#bucket-crime-types"><i class="fa fa-check"></i><b>3.2.2</b> Bucket Crime Types</a></li>
<li class="chapter" data-level="3.2.3" data-path="data.html"><a href="data.html#datetime-transformation"><i class="fa fa-check"></i><b>3.2.3</b> Date/Time Transformation</a></li>
<li class="chapter" data-level="3.2.4" data-path="data.html"><a href="data.html#geo-location-fields"><i class="fa fa-check"></i><b>3.2.4</b> Geo-Location Fields</a></li>
<li class="chapter" data-level="3.2.5" data-path="data.html"><a href="data.html#other-derivations"><i class="fa fa-check"></i><b>3.2.5</b> Other Derivations</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="data.html"><a href="data.html#filter-table-for-relevance"><i class="fa fa-check"></i><b>3.3</b> Filter Table for Relevance</a></li>
<li class="chapter" data-level="3.4" data-path="data.html"><a href="data.html#select-and-rename-columns"><i class="fa fa-check"></i><b>3.4</b> Select and Rename Columns</a></li>
<li class="chapter" data-level="3.5" data-path="data.html"><a href="data.html#missing-value-analysis"><i class="fa fa-check"></i><b>3.5</b> Missing Value Analysis</a></li>
<li class="chapter" data-level="3.6" data-path="data.html"><a href="data.html#interactive-component-datasets"><i class="fa fa-check"></i><b>3.6</b> Interactive Component Datasets</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="results.html"><a href="results.html"><i class="fa fa-check"></i><b>4</b> Results</a>
<ul>
<li class="chapter" data-level="4.1" data-path="results.html"><a href="results.html#crime-category-and-demographic-analysis"><i class="fa fa-check"></i><b>4.1</b> Crime Category and Demographic Analysis</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="results.html"><a href="results.html#crime-by-borough"><i class="fa fa-check"></i><b>4.1.1</b> Crime by Borough</a></li>
<li class="chapter" data-level="4.1.2" data-path="results.html"><a href="results.html#race"><i class="fa fa-check"></i><b>4.1.2</b> Race</a></li>
<li class="chapter" data-level="4.1.3" data-path="results.html"><a href="results.html#gender"><i class="fa fa-check"></i><b>4.1.3</b> Gender</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="results.html"><a href="results.html#time-series-analysis"><i class="fa fa-check"></i><b>4.2</b> Time Series Analysis</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="results.html"><a href="results.html#day-of-week"><i class="fa fa-check"></i><b>4.2.1</b> Day of Week</a></li>
<li class="chapter" data-level="4.2.2" data-path="results.html"><a href="results.html#time-of-day"><i class="fa fa-check"></i><b>4.2.2</b> Time of Day</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="results.html"><a href="results.html#location-analysis"><i class="fa fa-check"></i><b>4.3</b> Location Analysis</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="results.html"><a href="results.html#spatial-distribution-around-columbia"><i class="fa fa-check"></i><b>4.3.1</b> Spatial Distribution Around Columbia</a></li>
<li class="chapter" data-level="4.3.2" data-path="results.html"><a href="results.html#spatial-distribution-around-columbia-by-crime-category"><i class="fa fa-check"></i><b>4.3.2</b> Spatial Distribution Around Columbia by Crime Category</a></li>
<li class="chapter" data-level="4.3.3" data-path="results.html"><a href="results.html#increasing-radius-from-columbia"><i class="fa fa-check"></i><b>4.3.3</b> Increasing Radius from Columbia</a></li>
<li class="chapter" data-level="4.3.4" data-path="results.html"><a href="results.html#cumulative-crime-near-cu"><i class="fa fa-check"></i><b>4.3.4</b> Cumulative Crime Near CU</a></li>
<li class="chapter" data-level="4.3.5" data-path="results.html"><a href="results.html#crime-density"><i class="fa fa-check"></i><b>4.3.5</b> Crime Density</a></li>
<li class="chapter" data-level="4.3.6" data-path="results.html"><a href="results.html#deeper-dive-of-crime-density"><i class="fa fa-check"></i><b>4.3.6</b> Deeper Dive of Crime Density</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="interactive-component.html"><a href="interactive-component.html"><i class="fa fa-check"></i><b>5</b> Interactive Component</a>
<ul>
<li class="chapter" data-level="5.1" data-path="interactive-component.html"><a href="interactive-component.html#interactive-map-of-crime-around-columbia"><i class="fa fa-check"></i><b>5.1</b> Interactive Map of Crime Around Columbia</a></li>
<li class="chapter" data-level="5.2" data-path="interactive-component.html"><a href="interactive-component.html#future-work"><i class="fa fa-check"></i><b>5.2</b> Future Work</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="conclusion.html"><a href="conclusion.html"><i class="fa fa-check"></i><b>6</b> Conclusion</a>
<ul>
<li class="chapter" data-level="6.1" data-path="conclusion.html"><a href="conclusion.html#limitations-and-future-work"><i class="fa fa-check"></i><b>6.1</b> Limitations and Future Work</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">NYC Crime</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data" class="section level1 hasAnchor" number="3">
<h1><span class="header-section-number">Chapter 3</span> Data<a href="data.html#data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this section we ingest the data and perform several cleaning operations to pre-process the data for use in the Results chapter. Please click the eye icon above to view the code, transformations, and required packages used in this project.</p>
<div id="source" class="section level2 hasAnchor" number="3.1">
<h2><span class="header-section-number">3.1</span> Source<a href="data.html#source" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>As discussed in the Proposal section, the data for this project comes from published crime reports. NYC Open Data (NYC Office of Technology and Innovation (OTI)) in conjunction with New York City Police Department (NYPD) makes public safety data available for anyone online. In particular they publish Complaint Data which contains felony, misdemeanor, and violation crimes reported to the NYPD from 2006 till present.</p>
<p>Year-to-Date (YTD) (2022-01 to 2022-09): <a href="https://data.cityofnewyork.us/Public-Safety/NYPD-Complaint-Data-Current-Year-To-Date-/5uac-w243" class="uri">https://data.cityofnewyork.us/Public-Safety/NYPD-Complaint-Data-Current-Year-To-Date-/5uac-w243</a></p>
<p>The dataset contains mostly categorical variables and dates with each row indicating a crime/violation. As of the last update on October 19, 2022, the YTD Dataset contains 397K rows and 36 columns. A data dictionary is provided by NYC Open Data at the link above.</p>
<div id="content-1" class="section level3 hasAnchor" number="3.1.1">
<h3><span class="header-section-number">3.1.1</span> Content<a href="data.html#content-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>“Complaint data” is a mixed set of records because it contains crimes (ex. robbery, rape, assault), parking violations, complaints of harassment, reports of abandoned animals, and more. In this script, we investigate, clean, and filter the data so that we can explor and answer our research questions.</p>
<p>As the link above indicates, there are two sets of data containing distinct records. A year-to-date dataset from 1/1/2022 to 9/30/2022 and a historic dataset containing records from 1/1/2006 to 12/31/2021. We are only using the the year-to-date data but can incorporate historic records in a future iteration of the analysis.</p>
<p>The following is a list of column names and their description. Not all fields are used for the analysis and some contain mostly blank values as we will show. As you may notice, most of the data is categorical but we will derive continuous variables through data and location fields.</p>
<p>S.No Column Name (Data Type): Description</p>
<ol style="list-style-type: decimal">
<li>CMPLNT_NUM (text): Randomly generated persistent ID for each complaint</li>
<li>ADDR_PCT_CD (text): The precinct in which the incident occurred</li>
<li>BORO_NM (text): The name of the borough in which the incident occurred</li>
<li>CMPLNT_FR_DT (DateTime): Exact date of occurrence for the reported event (or starting date of occurrence, if CMPLNT_TO_DT exists)</li>
<li>CMPLNT_FR_TM (text): Exact time of occurrence for the reported event (or starting time of occurrence, if CMPLNT_TO_TM exists)</li>
<li>CMPLNT_TO_DT (DateTime): Ending date of occurrence for the reported event, if exact time of occurrence is unknown</li>
<li>CMPLNT_TO_TM (text): Ending time of occurrence for the reported event, if exact time of occurrence is unknown</li>
<li>CRM_ATPT_CPTD_CD (text): Indicator of whether crime was successfully completed or attempted, but failed or was interrupted prematurely</li>
<li>HADEVELOPT (text): Name of NYCHA housing development of occurrence, if applicable</li>
<li>HOUSING_PSA (Number): Development Level CodeNumber</li>
<li>JURISDICTION_CODE (Number): Jurisdiction responsible for incident. Either internal, like Police(0), Transit(1), and Housing(2); or external(3), like Correction, Port Authority, etc.</li>
<li>JURIS_DESC (text): Description of the jurisdiction code</li>
<li>KY_CD (Number): Three digit offense classification code</li>
<li>LAW_CAT_CD (text): Level of offense: felony, misdemeanor, violation</li>
<li>LOC_OF_OCCUR_DESC (text): Specific location of occurrence in or around the premises; inside, opposite of, front of, rear of</li>
<li>OFNS_DESC (text): Description of offense corresponding with key code</li>
<li>PARKS_NM (text): Name of NYC park, playground or greenspace of occurrence, if applicable (state parks are not included)</li>
<li>PATROL_BORO (text): The name of the patrol borough in which the incident occurred</li>
<li>PD_CD (Number): Three digit internal classification code (more granular than Key Code)</li>
<li>PD_DESC (text): Description of internal classification corresponding with PD code (more granular than Offense Description)</li>
<li>PREM_TYP_DESC (text): Specific description of premises; grocery store, residence, street, etc.</li>
<li>RPT_DT (DateTime): Date event was reported to police</li>
<li>STATION_NAME (text): Transit station name</li>
<li>SUSP_AGE_GROUP (text): Suspect’s Age Group</li>
<li>SUSP_RACE (text): Suspect’s Race Description</li>
<li>SUSP_SEX (text): Suspect’s Sex Description</li>
<li>TRANSIT_DISTRICT (Number): Transit district in which the offense occurred</li>
<li>VIC_AGE_GROUP (text): Victim’s Age Group</li>
<li>VIC_RACE (text): Victim’s Race Description</li>
<li>VIC_SEX (text): Victim’s Sex Description</li>
<li>X_COORD_CD (Number): X-coordinate for New York State Plane Coordinate System, Long Island Zone, NAD 83, units feet (FIPS 3104)</li>
<li>Y_COORD_CD (Number): Y-coordinate for New York State Plane Coordinate System, Long Island Zone, NAD 83, units feet (FIPS 3104)</li>
<li>Latitude (Number): Midblock Latitude coordinate for Global Coordinate System, WGS 1984, decimal degrees (EPSG 4326)</li>
<li>Longitude (Number): Midblock Longitude coordinate for Global Coordinate System, WGS 1984, decimal degrees (EPSG 4326)</li>
<li>LatLon (Location)</li>
<li>New Georeferenced Column (Point)</li>
</ol>
</div>
<div id="who-collects-the-data-1" class="section level3 hasAnchor" number="3.1.2">
<h3><span class="header-section-number">3.1.2</span> Who Collects The Data<a href="data.html#who-collects-the-data-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The data was collected and published by the NY Police Department (NYPD).</p>
</div>
<div id="format-and-importation-1" class="section level3 hasAnchor" number="3.1.3">
<h3><span class="header-section-number">3.1.3</span> Format and Importation<a href="data.html#format-and-importation-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>OTI provides the data in 4 formats: 1) online table, 2) visualization, 3) CSV, and 4) API. The first two have limited functionality and customization so we will not use those versions. The API requires an account and authentication tokens. Given that the CSV for YTD data is not too large (140MB), it seems the easiest to work with. CSV is a format we are most familiar with and one that R handles well.</p>
<p>Is there a difference between CSV and API? Yes. Not in number of observations but in the columns. With the CSV, we get a total of 36 columns (listed above) but with the API we get a total of 41 columns.</p>
<p>Following are the columns that are present in the CSV data but not in the API data:</p>
<ol style="list-style-type: decimal">
<li>New Georeferenced Column.</li>
</ol>
<p>Following are the columns that are present in the API data but not in the CSV data:</p>
<ol style="list-style-type: decimal">
<li>:<span class="citation">@computed_region_92fq_4b7q</span><br />
</li>
<li>:<span class="citation">@computed_region_yeji_bk3q</span><br />
</li>
<li>:<span class="citation">@computed_region_efsh_h5xi</span></li>
<li>geocoded_column</li>
<li>:<span class="citation">@computed_region_sbqj_enih</span></li>
<li>:<span class="citation">@computed_region_f5dn_yrer</span></li>
</ol>
<p>For our purposes, the data in the CSV is sufficient and easy to use.</p>
</div>
<div id="data-updates" class="section level3 hasAnchor" number="3.1.4">
<h3><span class="header-section-number">3.1.4</span> Data Updates<a href="data.html#data-updates" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This dataset was first made public on 11/1/2018. It is updated quarterly. It appears that the metadata is updated more frequently but it is not clear what changes are incorporated as there could be several updates made in Oct 2022 but the data will only contain records up to the prior month end of Sept 2022.</p>
</div>
</div>
<div id="data-transformation-and-cleaning" class="section level2 hasAnchor" number="3.2">
<h2><span class="header-section-number">3.2</span> Data Transformation and Cleaning<a href="data.html#data-transformation-and-cleaning" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This .Rmd file contains the following sections:</p>
<p>Data Loading: To show data was ingested into the environment
Bucketing: To combine values in a derived field for simplifying graphs
Date Transformations: To make strings into dates and extract time information
Derived Geo Fields: To calculate distances between points
-Derive Other Fields: To derived other fields and perform minor cleaning operations</p>
<p>We then filter our data frame to relevant records, and then select key fields for ease-of-use. “Relevant” records are defined by time frame and crime category explained more below.</p>
<p>There is also a section at the end on missing data.</p>
<div id="data-loading" class="section level3 hasAnchor" number="3.2.1">
<h3><span class="header-section-number">3.2.1</span> Data Loading<a href="data.html#data-loading" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We ingest the CSV data and must re-cast a data type for one column.</p>
</div>
<div id="bucket-crime-types" class="section level3 hasAnchor" number="3.2.2">
<h3><span class="header-section-number">3.2.2</span> Bucket Crime Types<a href="data.html#bucket-crime-types" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This code chunk creates a new field to simplify the crime category to reduce the number of unique values for visualization purposes. We cut down from over 60 values to 5 and will show more in the Results chapter.</p>
<p>Note: there are 5 values with missing Offense category. Since they have valid PD_CD (Crime ID) and PD_DESC, we can impute these values from other columns with the same PD_CD.
-Two values are for obscenity - 594 PD_CD (categorized as sex crimes)
-One values for crime pos weap - 797 PD_CD (categorized as major violent crimes/dangerous weapons)
-One value for “place false bomb” - 648 PD_CD (categorized as other)
-One value for “noise” - 872 PD_CD (categorized as other)</p>
</div>
<div id="datetime-transformation" class="section level3 hasAnchor" number="3.2.3">
<h3><span class="header-section-number">3.2.3</span> Date/Time Transformation<a href="data.html#datetime-transformation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Per the data dictionary, there is both a “from_date” and a “to_date” when the exact time is unknown. There is also a “report date” for when the crime was reported. Using these fields in conjunction, we can derive a new clean field that is the assumed date of the incident. Assumptions: When there is a range, we will use the “from” date only because is populated well and will on average approximate the frequency of crime over time; when from_date is null, we will use the report_date (does not occur often, see Missing Data Analysis below).</p>
</div>
<div id="geo-location-fields" class="section level3 hasAnchor" number="3.2.4">
<h3><span class="header-section-number">3.2.4</span> Geo-Location Fields<a href="data.html#geo-location-fields" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>This section uses a new package, geosphere, to calcluate the distance between two points in Lat/Long format. Here we are finding the distance from each crime to the center of the main Columbia campus for use later.</p>
</div>
<div id="other-derivations" class="section level3 hasAnchor" number="3.2.5">
<h3><span class="header-section-number">3.2.5</span> Other Derivations<a href="data.html#other-derivations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In this section, we add additional fields for more classification (explained more in the Results section), reclassify “null” to Unknown in specific instances, shorten values for ease-of-use, and combine information from several premise columns into one to simplify category values.</p>
</div>
</div>
<div id="filter-table-for-relevance" class="section level2 hasAnchor" number="3.3">
<h2><span class="header-section-number">3.3</span> Filter Table for Relevance<a href="data.html#filter-table-for-relevance" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The raw data only contains crimes that were reported in 2022 even if they took place earlier. As we will show below, this create a bias in the time series and this section creates a new data frame to filter out old records (as defined by derived field above; before 1/1/2022).
We also filter for only “relevant” crimes - i.e. excluding parking violations, noise compliants (those in the “Other” category)</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<p>From this we see that there is a large drop off in historic reports. This make sense as it is more likely that someone would report a crime in the same year that it occurs. Although NYPD allows people to report crimes that occurred in 2020, there will be much fewer of them reported in 2022. If we wanted to use data prior to 2022 we should include the old crime reports for prior years. Also there are some quality issues with historic data as we see very old crimes (year 1500) which indicate some human error or a record-keeping issue.</p>
<p>After filtering the data, we have a cleaner data frame and more sensical results as we will show in the next chapter. Overall, there are not many records that are excluded (from 396,978 to 364,298).</p>
</div>
<div id="select-and-rename-columns" class="section level2 hasAnchor" number="3.4">
<h2><span class="header-section-number">3.4</span> Select and Rename Columns<a href="data.html#select-and-rename-columns" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>This section simply chooses fields that are used in our analysis to simplify and reduce the overall size of the working data frame. We also make some character fields factors and order them by frequency.</p>
</div>
<div id="missing-value-analysis" class="section level2 hasAnchor" number="3.5">
<h2><span class="header-section-number">3.5</span> Missing Value Analysis<a href="data.html#missing-value-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>First let us look at the raw data to see what things look like originally. We can categorize nulls as real (i.e. true NA) vs “artificial” (i.e. the word “null” in the raw data or similar). Then we can show which fields and what percent of each (out of the 300k rows) may have an issue.</p>
<pre><code>## # A tibble: 23 × 5
##    field                    Real_Null Artificial_Null  Total Percent
##    &lt;chr&gt;                        &lt;dbl&gt;           &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
##  1 HADEVELOPT                       0          395756 395756   99.7 
##  2 PARKS_NM                         0          394295 394295   99.3 
##  3 STATION_NAME                     0          388677 388677   97.9 
##  4 TRANSIT_DISTRICT            388677               0 388677   97.9 
##  5 HOUSING_PSA                 371512               0 371512   93.6 
##  6 Inside_Outside               66081               0  66081   16.6 
##  7 LOC_OF_OCCUR_DESC            66081               0  66081   16.6 
##  8 CMPLNT_TO_DT                 29393               0  29393    7.4 
##  9 CMPLNT_TO_TM                     0           29276  29276    7.37
## 10 BORO_NM                        657               0    657    0.17
## 11 Borough_short                  657               0    657    0.17
## 12 PREM_TYP_DESC                    0             476    476    0.12
## 13 PD_CD                          440               0    440    0.11
## 14 PD_DESC                          0             440    440    0.11
## 15 ADDR_PCT_CD                     20               0     20    0.01
## 16 Lat_Lon                          9               0      9    0   
## 17 Latitude                         9               0      9    0   
## 18 Longitude                        9               0      9    0   
## 19 New Georeferenced Column         9               0      9    0   
## 20 X_COORD_CD                       9               0      9    0   
## 21 Y_COORD_CD                       9               0      9    0   
## 22 OFNS_DESC                        0               5      5    0   
## 23 PATROL_BORO                      0               2      2    0</code></pre>
<p>So we see we have mostly missing data for 5 fields. Location and its derived field is also missing a good portion which is likely due to masking for privacy reasons per the data source notes found at the NY Open Data Link.</p>
<p>Let us look at missing patterns now:
Raw Data, All Columns:
<img src="finalproj_files/figure-html/unnamed-chunk-6-1.png" width="1440" />
Raw Data, All Columns (Except Transit_District and Housing_PSA):
<img src="finalproj_files/figure-html/unnamed-chunk-7-1.png" width="1440" />
These charts are hard to read given the number of columns but it shows that most data is actually populated very well as we saw above. There are two problem fields causing all of the real nulls but we can re-graph this without those and see that complete cases are at the top. However, this is still not accurate because there are string values in the data that say “(null)” or “Unknown” which would appear as populated. In any case, we do not need to clean and evaluate all columns, so let us work off of the new, filtered dataset we created in a prior section (see below).
Side Note: We initially noticed the Complaint_Num was null often but this was due to it containing alphanumeric characters and R loading it as a number only. It has been corrected and serves as a primary key for the data frame.</p>
<p><img src="finalproj_files/figure-html/unnamed-chunk-8-1.png" width="1440" />
The filtered data (relevant columns and rows only) is populated very well and this dataset accounts for improperly coded values where “(null)” will appear as NA properly. We have re-coded some values to “Unknown” as that value appears in the raw data is is reasonable (e.g. if the suspect was not found, we have no information on them and can say Unknown). We see there are a few blanks for Borough and lat/long and thus the related derived field, but otherwise we have a good data frame to use in the next chapter.</p>
</div>
<div id="interactive-component-datasets" class="section level2 hasAnchor" number="3.6">
<h2><span class="header-section-number">3.6</span> Interactive Component Datasets<a href="data.html#interactive-component-datasets" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The following code is used to create CSV files for use in the interactive component. Data is pre-filtered to keep the overall size small and manageable when plotting lots of points. This speeds up the time when users interact in that chapter.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="proposal.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="results.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/ds4114/NYC_Crime_Group32/edit/main/data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/ds4114/NYC_Crime_Group32/blob/main/data.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
